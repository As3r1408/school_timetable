<!DOCTYPE html>
<html lang="en">
<head>
    <title>Admin - Manage Timetables</title>
</head>
<body>
    <h2>Admin - Manage Timetables</h2>

    <h3>Add Timetable Entry</h3>
    <form method="post">
        Select User:
        <select name="user_id" required>
            {% for user in users %}
                <option value="{{ user.id }}">{{ user.username }} ({{ user.role }})</option>
            {% endfor %}
        </select><br>
        Date: <input type="date" name="date" required><br>
        Start Time: <input type="time" name="start_time" required><br>
        End Time: <input type="time" name="end_time" required><br>
        Subject: <input type="text" name="subject" required><br>
        Teacher: <input type="text" name="teacher" required><br>
        <button type="submit">Add Entry</button>
    </form>

    <h3>Existing Timetable Entries</h3>
    <ul>
        {% for entry in timetable %}
            <li>
                {{ entry.date }} - {{ entry.start_time }} to {{ entry.end_time }} - {{ entry.subject }} ({{ entry.teacher }}) - {{ entry.user.username }}
                <form method="post" action="{{ url_for('delete_timetable', id=entry.id) }}" style="display:inline;">
                    <button type="submit" onclick="return confirm('Are you sure?')">Delete</button>
                </form>
            </li>
        {% endfor %}
    </ul>

    <p><a href="{{ url_for('admin') }}">Back to Admin Panel</a></p>
</body>
</html>
