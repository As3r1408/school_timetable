<!DOCTYPE html>
<html lang="en">
<head>
    <title>Timetable</title>
</head>
<body>
    <h2>Timetable</h2>

    {% if use_week_ab %}
        <p>Current Week: <strong>Week {{ current_week_type }}</strong></p>
    {% endif %}

    {% if session['role'] == "staff" %}
    <form method="post">
        Date: <input type="date" name="date" required><br>
        Time: <input type="time" name="time" required><br>
        Subject: <input type="text" name="subject" required><br>
        Teacher: <input type="text" name="teacher" required><br>
        <button type="submit">Add Entry</button>
    </form>
    {% endif %}

    <h3>Your Schedule</h3>
    <ul>
        {% for entry in timetable %}
            <li>{{ entry.date }} ({{ entry.day }}) - 
                {% if use_week_ab %}
                    <strong>Week {{ entry.week_type }}</strong> - 
                {% endif %}
                {{ entry.subject }} ({{ entry.teacher }})
                <br>Time: {{ entry.start_time }} - {{ entry.end_time }}
                {% if session['role'] == "staff" %}
                <form method="post" action="{{ url_for('delete_timetable', id=entry.id) }}">
                    <button type="submit">Delete</button>
                </form>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <p><a href="{{ url_for('dashboard') }}">Back to Dashboard</a></p>
</body>
</html>

